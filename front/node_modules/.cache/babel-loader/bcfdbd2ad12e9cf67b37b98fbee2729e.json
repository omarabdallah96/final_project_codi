{"ast":null,"code":"var _jsxFileName = \"/home/omar/codi/final/front/src/components/Routes.js\",\n    _s = $RefreshSig$();\n\nimport React, { useContext } from \"react\";\nimport SessionContext from \"./session/SessionContext\";\nimport { Switch, Route, Redirect } from \"react-router-dom\";\nimport NotFound from \"../pages/NotFound\";\nimport Account from \"../pages/Account\";\nimport Home from \"../pages//Home/Home\";\nimport Profile from \"../pages/Profile/Profile\";\nimport About from \"../pages/About/About\";\nimport CreatePost from \"../pages/Post/Createpost\";\nimport { createTheme, ThemeProvider } from \"@mui/material/styles\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport default function Routes() {\n  _s();\n\n  const theme = createTheme({\n    palette: {\n      primary: {\n        // Purple and green play nicely together.\n        main: \"#007bff\"\n      },\n      secondary: {\n        // This is green.A700 as hex.\n        main: \"#f50057\"\n      }\n    }\n  });\n  const {\n    session: {\n      user: {\n        token,\n        role\n      }\n    }\n  } = useContext(SessionContext);\n  return /*#__PURE__*/_jsxDEV(ThemeProvider, {\n    theme: theme,\n    children: /*#__PURE__*/_jsxDEV(Switch, {\n      children: [/*#__PURE__*/_jsxDEV(PublicRoute, {\n        exact: true,\n        path: \"/account\",\n        component: Account,\n        token: token\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 35,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(PrivateRoute, {\n        role: role,\n        exact: true,\n        path: \"/\",\n        component: Home,\n        token: token\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 36,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(PrivateRoute, {\n        role: role,\n        exact: true,\n        path: \"/newpost\",\n        component: CreatePost,\n        token: token\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 43,\n        columnNumber: 9\n      }, this), \"About\", /*#__PURE__*/_jsxDEV(PrivateRoute, {\n        role: role,\n        exact: true,\n        path: \"/profile\",\n        component: Profile,\n        token: token\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 51,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Route, {\n        component: NotFound\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Route, {\n        component: NotFound\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 34,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 33,\n    columnNumber: 5\n  }, this);\n}\n\n_s(Routes, \"WUPVUApmcry5TV/UirQXi1ttHaY=\");\n\n_c = Routes;\n\nfunction PublicRoute({\n  path,\n  component: Component,\n  token,\n  ...props\n}) {\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(Route, { ...props,\n      path: path,\n      render: props => token ? /*#__PURE__*/_jsxDEV(Redirect, {\n        to: \"/\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 19\n      }, this) : /*#__PURE__*/_jsxDEV(Component, { ...props\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 41\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 7\n    }, this)\n  }, void 0, false);\n}\n\n_c2 = PublicRoute;\n\nfunction PrivateRoute({\n  path,\n  component: Component,\n  token,\n  role,\n  ...props\n}) {\n  return /*#__PURE__*/_jsxDEV(Route, { ...props,\n    path: path,\n    render: props => {\n      let redirectTo = null;\n      if (!token) redirectTo = \"/account\";\n\n      switch (role) {\n        case \"admin\":\n          if ([\"/profile\"].includes(path)) redirectTo = \"/dashboard\";\n          break;\n\n        case \"user\":\n          if (path.indexOf(\"dashboard\") > -1) redirectTo = \"/\";\n          break;\n\n        default:\n          break;\n      }\n\n      if (redirectTo) return /*#__PURE__*/_jsxDEV(Redirect, {\n        to: redirectTo\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 32\n      }, this);\n      return /*#__PURE__*/_jsxDEV(Component, { ...props\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 16\n      }, this);\n    }\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 80,\n    columnNumber: 5\n  }, this);\n}\n\n_c3 = PrivateRoute;\n\nvar _c, _c2, _c3;\n\n$RefreshReg$(_c, \"Routes\");\n$RefreshReg$(_c2, \"PublicRoute\");\n$RefreshReg$(_c3, \"PrivateRoute\");","map":{"version":3,"sources":["/home/omar/codi/final/front/src/components/Routes.js"],"names":["React","useContext","SessionContext","Switch","Route","Redirect","NotFound","Account","Home","Profile","About","CreatePost","createTheme","ThemeProvider","Routes","theme","palette","primary","main","secondary","session","user","token","role","PublicRoute","path","component","Component","props","PrivateRoute","redirectTo","includes","indexOf"],"mappings":"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","sourcesContent":["import React, { useContext } from \"react\";\nimport SessionContext from \"./session/SessionContext\";\nimport { Switch, Route, Redirect } from \"react-router-dom\";\nimport NotFound from \"../pages/NotFound\";\nimport Account from \"../pages/Account\";\nimport Home from \"../pages//Home/Home\";\nimport Profile from \"../pages/Profile/Profile\";\nimport About from \"../pages/About/About\";\n\nimport CreatePost from \"../pages/Post/Createpost\";\nimport { createTheme, ThemeProvider } from \"@mui/material/styles\";\n\nexport default function Routes() {\n  const theme = createTheme({\n    palette: {\n      primary: {\n        // Purple and green play nicely together.\n        main: \"#007bff\",\n      },\n      secondary: {\n        // This is green.A700 as hex.\n        main: \"#f50057\",\n      },\n    },\n  });\n  const {\n    session: {\n      user: { token, role },\n    },\n  } = useContext(SessionContext);\n\n  return (\n    <ThemeProvider theme={theme}>\n      <Switch>\n        <PublicRoute exact path=\"/account\" component={Account} token={token} />\n        <PrivateRoute\n          role={role}\n          exact\n          path=\"/\"\n          component={Home}\n          token={token}\n        />\n        <PrivateRoute\n          role={role}\n          exact\n          path=\"/newpost\"\n          component={CreatePost}\n          token={token}\n        />\n        About\n        <PrivateRoute\n          role={role}\n          exact\n          path=\"/profile\"\n          component={Profile}\n          token={token}\n        />\n        <Route component={NotFound} />\n        <Route  component={NotFound} />\n      </Switch>\n    </ThemeProvider>\n  );\n}\nfunction PublicRoute({ path, component: Component, token, ...props }) {\n  return (\n    <>\n      <Route\n        {...props}\n        path={path}\n        render={(props) =>\n          token ? <Redirect to=\"/\" /> : <Component {...props} />\n        }\n      />\n    </>\n  );\n}\n\nfunction PrivateRoute({ path, component: Component, token, role, ...props }) {\n  return (\n    <Route\n      {...props}\n      path={path}\n      render={(props) => {\n        let redirectTo = null;\n        if (!token) redirectTo = \"/account\";\n\n        switch (role) {\n          case \"admin\":\n            if ([\"/profile\"].includes(path)) redirectTo = \"/dashboard\";\n            break;\n          case \"user\":\n            if (path.indexOf(\"dashboard\") > -1) redirectTo = \"/\";\n            break;\n          default:\n            break;\n        }\n\n        if (redirectTo) return <Redirect to={redirectTo} />;\n        return <Component {...props} />;\n      }}\n    />\n  );\n}\n"]},"metadata":{},"sourceType":"module"}